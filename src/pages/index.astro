---
import ChargeSection from "../components/ChargeSection.astro";
import HeroSection from "../components/HeroSection.astro";
import LandingHeader from "../components/LandingHeader.astro";
import ModelS from "../components/ModelS.astro";
import ModelThree from "../components/ModelThree.astro";
import ModelX from "../components/ModelX.astro";
import ModelY from "../components/ModelY.astro";
import Section from "../components/Section.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout title="Tesla">
  <LandingHeader />
  <main class="snap-y snap-mandatory relative w-full h-screen overflow-auto">
    <div id="home" class="snap-center">
      <HeroSection />
    </div>
    <div id="model-s" class="snap-center">
      <ModelS />
    </div>
    <div id="model-3" class="snap-center">
      <ModelThree />
    </div>
    <div id="model-x" class="snap-center">
      <ModelX />
    </div>
    <div id="model-y" class="snap-center">
      <ModelY />
    </div>
  </main>
</Layout>

<script>
  const $header = document.querySelector("#landing-header") as HTMLElement;
  const observerOptions = {
    root: null,
    rootMargin: "0px",
    threshold: 0.5,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      const { isIntersecting } = entry;
      if (isIntersecting) {
        const color = entry.target.getAttribute("data-header-color") || "black";
        $header.style.color = color;
      }
    });
  }, observerOptions);

  const $sections = document.querySelectorAll(
    ".landing-section"
  ) as NodeListOf<HTMLElement>;
  $sections.forEach(($section) => observer.observe($section));
</script>
